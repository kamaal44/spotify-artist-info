{"ast":null,"code":"const puppeteer = require(\"puppeteer\");\n\nconst cheerio = require(\"cheerio\");\n\nasync function puppeteerScrapeScriptTag(artistID) {\n  try {\n    console.log(`in puppeteerScrapeScriptTag, doing ${artistID}`);\n    var url = \"https://open.spotify.com/artist/\" + artistID + \"/about\";\n    const browser = await puppeteer.launch({\n      headless: true,\n      args: [\"--no-sandbox\", \"--disable-setuid-sandbox\"]\n    });\n    const page = await browser.newPage();\n    await page.setDefaultNavigationTimeout(0); // sets user agent to internet explorer 11\n\n    await page.setUserAgent(\"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko\");\n    await page.goto(url);\n    let bodyHTML = await page.evaluate(() => document.body.innerHTML);\n    const $ = cheerio.load(bodyHTML);\n    let rawSpotifyData = $(\"script\");\n    var scriptData = rawSpotifyData[3].children[0].data;\n    await browser.close(); // returns\n\n    return scriptData;\n  } catch (err) {\n    console.log(`~~~~~~~~~~~~~~~~~~~~~~~~ err caught in puppeteerScrapeScriptTag ~~~~~~~~~~~~~~~~~~~~~~~~`);\n    console.log(err);\n  }\n}\n\nmodule.exports = puppeteerScrapeScriptTag;","map":{"version":3,"sources":["C:/Users/luke/Development/nextjs1/pages/api/artist-id/puppeteerScrapeScriptTag.js"],"names":["puppeteer","require","cheerio","puppeteerScrapeScriptTag","artistID","console","log","url","browser","launch","headless","args","page","newPage","setDefaultNavigationTimeout","setUserAgent","goto","bodyHTML","evaluate","document","body","innerHTML","$","load","rawSpotifyData","scriptData","children","data","close","err","module","exports"],"mappings":"AAAA,MAAMA,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AAEA,eAAeE,wBAAf,CAAwCC,QAAxC,EAAkD;AAChD,MAAI;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAa,sCAAqCF,QAAS,EAA3D;AACA,QAAIG,GAAG,GAAG,qCAAqCH,QAArC,GAAgD,QAA1D;AACA,UAAMI,OAAO,GAAG,MAAMR,SAAS,CAACS,MAAV,CAAiB;AACrCC,MAAAA,QAAQ,EAAE,IAD2B;AAErCC,MAAAA,IAAI,EAAE,CAAC,cAAD,EAAiB,0BAAjB;AAF+B,KAAjB,CAAtB;AAIA,UAAMC,IAAI,GAAG,MAAMJ,OAAO,CAACK,OAAR,EAAnB;AACA,UAAMD,IAAI,CAACE,2BAAL,CAAiC,CAAjC,CAAN,CARE,CASF;;AACA,UAAMF,IAAI,CAACG,YAAL,CACJ,+DADI,CAAN;AAGA,UAAMH,IAAI,CAACI,IAAL,CAAUT,GAAV,CAAN;AACA,QAAIU,QAAQ,GAAG,MAAML,IAAI,CAACM,QAAL,CAAc,MAAMC,QAAQ,CAACC,IAAT,CAAcC,SAAlC,CAArB;AACA,UAAMC,CAAC,GAAGpB,OAAO,CAACqB,IAAR,CAAaN,QAAb,CAAV;AACA,QAAIO,cAAc,GAAGF,CAAC,CAAC,QAAD,CAAtB;AACA,QAAIG,UAAU,GAAGD,cAAc,CAAC,CAAD,CAAd,CAAkBE,QAAlB,CAA2B,CAA3B,EAA8BC,IAA/C;AACA,UAAMnB,OAAO,CAACoB,KAAR,EAAN,CAlBE,CAmBF;;AACA,WAAOH,UAAP;AACD,GArBD,CAqBE,OAAOI,GAAP,EAAY;AACZxB,IAAAA,OAAO,CAACC,GAAR,CACG,0FADH;AAGAD,IAAAA,OAAO,CAACC,GAAR,CAAYuB,GAAZ;AACD;AACF;;AAEDC,MAAM,CAACC,OAAP,GAAiB5B,wBAAjB","sourcesContent":["const puppeteer = require(\"puppeteer\");\r\nconst cheerio = require(\"cheerio\");\r\n\r\nasync function puppeteerScrapeScriptTag(artistID) {\r\n  try {\r\n    console.log(`in puppeteerScrapeScriptTag, doing ${artistID}`);\r\n    var url = \"https://open.spotify.com/artist/\" + artistID + \"/about\";\r\n    const browser = await puppeteer.launch({\r\n      headless: true,\r\n      args: [\"--no-sandbox\", \"--disable-setuid-sandbox\"]\r\n    });\r\n    const page = await browser.newPage();\r\n    await page.setDefaultNavigationTimeout(0);\r\n    // sets user agent to internet explorer 11\r\n    await page.setUserAgent(\r\n      \"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko\"\r\n    );\r\n    await page.goto(url);\r\n    let bodyHTML = await page.evaluate(() => document.body.innerHTML);\r\n    const $ = cheerio.load(bodyHTML);\r\n    let rawSpotifyData = $(\"script\");\r\n    var scriptData = rawSpotifyData[3].children[0].data;\r\n    await browser.close();\r\n    // returns\r\n    return scriptData;\r\n  } catch (err) {\r\n    console.log(\r\n      `~~~~~~~~~~~~~~~~~~~~~~~~ err caught in puppeteerScrapeScriptTag ~~~~~~~~~~~~~~~~~~~~~~~~`\r\n    );\r\n    console.log(err);\r\n  }\r\n}\r\n\r\nmodule.exports = puppeteerScrapeScriptTag;\r\n"]},"metadata":{},"sourceType":"script"}