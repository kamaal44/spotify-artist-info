{"ast":null,"code":"var _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar puppeteer = require(\"puppeteer\");\n\nvar cheerio = require(\"cheerio\");\n\nfunction puppeteerScrapeScriptTag(artistID) {\n  var url, browser, page, bodyHTML, $, rawSpotifyData, scriptData;\n  return _regeneratorRuntime.async(function puppeteerScrapeScriptTag$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          console.log(\"in puppeteerScrapeScriptTag, doing \".concat(artistID));\n          url = \"https://open.spotify.com/artist/\" + artistID + \"/about\";\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(puppeteer.launch({\n            headless: true,\n            args: [\"--no-sandbox\", \"--disable-setuid-sandbox\"]\n          }));\n\n        case 5:\n          browser = _context.sent;\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(browser.newPage());\n\n        case 8:\n          page = _context.sent;\n          _context.next = 11;\n          return _regeneratorRuntime.awrap(page.setDefaultNavigationTimeout(0));\n\n        case 11:\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(page.setUserAgent(\"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko\"));\n\n        case 13:\n          _context.next = 15;\n          return _regeneratorRuntime.awrap(page[\"goto\"](url));\n\n        case 15:\n          _context.next = 17;\n          return _regeneratorRuntime.awrap(page.evaluate(function () {\n            return document.body.innerHTML;\n          }));\n\n        case 17:\n          bodyHTML = _context.sent;\n          $ = cheerio.load(bodyHTML);\n          rawSpotifyData = $(\"script\");\n          scriptData = rawSpotifyData[3].children[0].data;\n          _context.next = 23;\n          return _regeneratorRuntime.awrap(browser.close());\n\n        case 23:\n          return _context.abrupt(\"return\", scriptData);\n\n        case 26:\n          _context.prev = 26;\n          _context.t0 = _context[\"catch\"](0);\n          console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~ err caught in puppeteerScrapeScriptTag, continuing ~~~~~~~~~~~~~~~~~~~~~~~~\");\n          console.log(_context.t0);\n\n        case 30:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 26]], Promise);\n}\n\nmodule.exports = puppeteerScrapeScriptTag;","map":{"version":3,"sources":["C:/Users/luke/Development/nextjs1/pages/artist-id/puppeteerScrapeScriptTag.js"],"names":["puppeteer","require","cheerio","puppeteerScrapeScriptTag","artistID","console","log","url","launch","headless","args","browser","newPage","page","setDefaultNavigationTimeout","setUserAgent","evaluate","document","body","innerHTML","bodyHTML","$","load","rawSpotifyData","scriptData","children","data","close","module","exports"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AAEA,SAAeE,wBAAf,CAAwCC,QAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEIC,UAAAA,OAAO,CAACC,GAAR,8CAAkDF,QAAlD;AACIG,UAAAA,GAHR,GAGc,qCAAqCH,QAArC,GAAgD,QAH9D;AAAA;AAAA,2CAI0BJ,SAAS,CAACQ,MAAV,CAAiB;AACrCC,YAAAA,QAAQ,EAAE,IAD2B;AAErCC,YAAAA,IAAI,EAAE,CAAC,cAAD,EAAiB,0BAAjB;AAF+B,WAAjB,CAJ1B;;AAAA;AAIUC,UAAAA,OAJV;AAAA;AAAA,2CAQuBA,OAAO,CAACC,OAAR,EARvB;;AAAA;AAQUC,UAAAA,IARV;AAAA;AAAA,2CASUA,IAAI,CAACC,2BAAL,CAAiC,CAAjC,CATV;;AAAA;AAAA;AAAA,2CAWUD,IAAI,CAACE,YAAL,CACJ,+DADI,CAXV;;AAAA;AAAA;AAAA,2CAcUF,IAAI,QAAJ,CAAUN,GAAV,CAdV;;AAAA;AAAA;AAAA,2CAeyBM,IAAI,CAACG,QAAL,CAAc;AAAA,mBAAMC,QAAQ,CAACC,IAAT,CAAcC,SAApB;AAAA,WAAd,CAfzB;;AAAA;AAeQC,UAAAA,QAfR;AAgBUC,UAAAA,CAhBV,GAgBcnB,OAAO,CAACoB,IAAR,CAAaF,QAAb,CAhBd;AAiBQG,UAAAA,cAjBR,GAiByBF,CAAC,CAAC,QAAD,CAjB1B;AAkBQG,UAAAA,UAlBR,GAkBqBD,cAAc,CAAC,CAAD,CAAd,CAAkBE,QAAlB,CAA2B,CAA3B,EAA8BC,IAlBnD;AAAA;AAAA,2CAmBUf,OAAO,CAACgB,KAAR,EAnBV;;AAAA;AAAA,2CAqBWH,UArBX;;AAAA;AAAA;AAAA;AAuBInB,UAAAA,OAAO,CAACC,GAAR;AAGAD,UAAAA,OAAO,CAACC,GAAR;;AA1BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA8BAsB,MAAM,CAACC,OAAP,GAAiB1B,wBAAjB","sourcesContent":["const puppeteer = require(\"puppeteer\");\r\nconst cheerio = require(\"cheerio\");\r\n\r\nasync function puppeteerScrapeScriptTag(artistID) {\r\n  try {\r\n    console.log(`in puppeteerScrapeScriptTag, doing ${artistID}`);\r\n    var url = \"https://open.spotify.com/artist/\" + artistID + \"/about\";\r\n    const browser = await puppeteer.launch({\r\n      headless: true,\r\n      args: [\"--no-sandbox\", \"--disable-setuid-sandbox\"]\r\n    });\r\n    const page = await browser.newPage();\r\n    await page.setDefaultNavigationTimeout(0);\r\n    // sets user agent to internet explorer 11\r\n    await page.setUserAgent(\r\n      \"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko\"\r\n    );\r\n    await page.goto(url);\r\n    let bodyHTML = await page.evaluate(() => document.body.innerHTML);\r\n    const $ = cheerio.load(bodyHTML);\r\n    let rawSpotifyData = $(\"script\");\r\n    var scriptData = rawSpotifyData[3].children[0].data;\r\n    await browser.close();\r\n\r\n    return scriptData;\r\n  } catch (err) {\r\n    console.log(\r\n      `~~~~~~~~~~~~~~~~~~~~~~~~ err caught in puppeteerScrapeScriptTag, continuing ~~~~~~~~~~~~~~~~~~~~~~~~`\r\n    );\r\n    console.log(err);\r\n  }\r\n}\r\n\r\nmodule.exports = puppeteerScrapeScriptTag;\r\n"]},"metadata":{},"sourceType":"script"}